<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_144) on Fri Sep 01 08:02:23 BST 2017 -->
<title>CqlMigrator (cqlmigrate 0.9.7-SNAPSHOT API)</title>
<meta name="date" content="2017-09-01">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CqlMigrator (cqlmigrate 0.9.7-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../uk/sky/cqlmigrate/CassandraNoOpLockConfig.CassandraNoOpLockConfigBuilder.html" title="class in uk.sky.cqlmigrate"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../uk/sky/cqlmigrate/CqlMigratorConfig.html" title="class in uk.sky.cqlmigrate"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?uk/sky/cqlmigrate/CqlMigrator.html" target="_top">Frames</a></li>
<li><a href="CqlMigrator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">uk.sky.cqlmigrate</div>
<h2 title="Interface CqlMigrator" class="title">Interface CqlMigrator</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">CqlMigrator</span></pre>
<div class="block">Interface for managing application schema changes in a synchronized fashion.
 The implementation classes are expected to implement some locking mechanism so that there are no concurrent schema modifications when multiple threads attempt to make the schema changes on the
 same cassandra keyspace.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../uk/sky/cqlmigrate/CqlMigrator.html#clean-com.datastax.driver.core.Session-java.lang.String-">clean</a></span>(com.datastax.driver.core.Session&nbsp;session,
     java.lang.String&nbsp;keyspace)</code>
<div class="block">Drops keyspace if it exists</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../uk/sky/cqlmigrate/CqlMigrator.html#clean-java.lang.String:A-int-java.lang.String-java.lang.String-java.lang.String-">clean</a></span>(java.lang.String[]&nbsp;hosts,
     int&nbsp;port,
     java.lang.String&nbsp;username,
     java.lang.String&nbsp;password,
     java.lang.String&nbsp;keyspace)</code>
<div class="block">Drops keyspace if it exists</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../uk/sky/cqlmigrate/CqlMigrator.html#migrate-com.datastax.driver.core.Session-java.lang.String-java.util.Collection-">migrate</a></span>(com.datastax.driver.core.Session&nbsp;session,
       java.lang.String&nbsp;keyspace,
       java.util.Collection&lt;java.nio.file.Path&gt;&nbsp;directories)</code>
<div class="block">If all nodes are up and a lock can be acquired this runs migration
 starting with bootstrap.cql and then the rest in alphabetical order.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../uk/sky/cqlmigrate/CqlMigrator.html#migrate-java.lang.String:A-int-java.lang.String-java.lang.String-java.lang.String-java.util.Collection-">migrate</a></span>(java.lang.String[]&nbsp;hosts,
       int&nbsp;port,
       java.lang.String&nbsp;username,
       java.lang.String&nbsp;password,
       java.lang.String&nbsp;keyspace,
       java.util.Collection&lt;java.nio.file.Path&gt;&nbsp;directories)</code>
<div class="block">If all nodes are up and a lock can be acquired this runs migration
 starting with bootstrap.cql and then the rest in alphabetical order.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="migrate-java.lang.String:A-int-java.lang.String-java.lang.String-java.lang.String-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>migrate</h4>
<pre>void&nbsp;migrate(java.lang.String[]&nbsp;hosts,
             int&nbsp;port,
             java.lang.String&nbsp;username,
             java.lang.String&nbsp;password,
             java.lang.String&nbsp;keyspace,
             java.util.Collection&lt;java.nio.file.Path&gt;&nbsp;directories)</pre>
<div class="block">If all nodes are up and a lock can be acquired this runs migration
 starting with bootstrap.cql and then the rest in alphabetical order.
 If the migration fails for any reason, the lock will not be released
 and manual intervention is required to cleanup and fix the issue.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hosts</code> - Comma separated list of cassandra hosts</dd>
<dd><code>port</code> - Native transport port for the above cassandra nodes</dd>
<dd><code>username</code> - Username for Cassandra's internal authentication using PasswordAuthenticator
                    (if using AllowAllAuthenticator, can be set to any value)</dd>
<dd><code>password</code> - Password for Cassandra's internal authentication using PasswordAuthenticator
                    (if using AllowAllAuthenticator, can be set to any value)</dd>
<dd><code>keyspace</code> - Keyspace name for which the schema migration needs to be applied</dd>
<dd><code>directories</code> - Comma separated list of directory paths containing the cql statements for the schema change</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../uk/sky/cqlmigrate/exception/ClusterUnhealthyException.html" title="class in uk.sky.cqlmigrate.exception">ClusterUnhealthyException</a></code> - if any nodes are down or the schema is not in agreement before running migration</dd>
<dd><code><a href="../../../uk/sky/cqlmigrate/exception/CannotAcquireLockException.html" title="class in uk.sky.cqlmigrate.exception">CannotAcquireLockException</a></code> - if any of the queries to acquire lock fail or
                                                             <a href="../../../uk/sky/cqlmigrate/CassandraLockConfig.CassandraLockConfigBuilder.html#withTimeout-java.time.Duration-"><code>CassandraLockConfig.CassandraLockConfigBuilder.withTimeout(Duration)</code></a>
                                                             is reached before lock can be acquired.</dd>
<dd><code><a href="../../../uk/sky/cqlmigrate/exception/CannotReleaseLockException.html" title="class in uk.sky.cqlmigrate.exception">CannotReleaseLockException</a></code> - if any of the queries to release lock fail</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any file types other than .cql are found</dd>
<dd><code>java.lang.IllegalStateException</code> - if cql file has changed after migration has been run</dd>
<dd><code>com.datastax.driver.core.exceptions.DriverException</code> - if any of the migration queries fails</dd>
</dl>
</li>
</ul>
<a name="migrate-com.datastax.driver.core.Session-java.lang.String-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>migrate</h4>
<pre>void&nbsp;migrate(com.datastax.driver.core.Session&nbsp;session,
             java.lang.String&nbsp;keyspace,
             java.util.Collection&lt;java.nio.file.Path&gt;&nbsp;directories)</pre>
<div class="block">If all nodes are up and a lock can be acquired this runs migration
 starting with bootstrap.cql and then the rest in alphabetical order.
 If the migration fails for any reason, the lock will not be released
 and manual intervention is required to cleanup and fix the issue.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>session</code> - Session to a cassandra cluster</dd>
<dd><code>keyspace</code> - Keyspace name for which the schema migration needs to be applied</dd>
<dd><code>directories</code> - Comma separated list of directory paths containing the cql statements for the schema change</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../uk/sky/cqlmigrate/exception/ClusterUnhealthyException.html" title="class in uk.sky.cqlmigrate.exception">ClusterUnhealthyException</a></code> - if any nodes are down or the schema is not
                                                             in agreement before running migration</dd>
<dd><code><a href="../../../uk/sky/cqlmigrate/exception/CannotAcquireLockException.html" title="class in uk.sky.cqlmigrate.exception">CannotAcquireLockException</a></code> - if any of the queries to acquire lock fail or
                                                             <a href="../../../uk/sky/cqlmigrate/CassandraLockConfig.CassandraLockConfigBuilder.html#withTimeout-java.time.Duration-"><code>CassandraLockConfig.CassandraLockConfigBuilder.withTimeout(Duration)</code></a>
                                                             is reached before lock can be acquired.</dd>
<dd><code><a href="../../../uk/sky/cqlmigrate/exception/CannotReleaseLockException.html" title="class in uk.sky.cqlmigrate.exception">CannotReleaseLockException</a></code> - if any of the queries to release lock fail</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any file types other than .cql are found</dd>
<dd><code>java.lang.IllegalStateException</code> - if cql file has changed after migration has been run</dd>
<dd><code>com.datastax.driver.core.exceptions.DriverException</code> - if any of the migration queries fails</dd>
</dl>
</li>
</ul>
<a name="clean-java.lang.String:A-int-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clean</h4>
<pre>void&nbsp;clean(java.lang.String[]&nbsp;hosts,
           int&nbsp;port,
           java.lang.String&nbsp;username,
           java.lang.String&nbsp;password,
           java.lang.String&nbsp;keyspace)</pre>
<div class="block">Drops keyspace if it exists</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hosts</code> - Comma separated list of cassandra hosts</dd>
<dd><code>port</code> - Native transport port for the above cassandra nodes</dd>
<dd><code>username</code> - Username for Cassandra's internal authentication using PasswordAuthenticator
                 (if using AllowAllAuthenticator, can be set to any value)</dd>
<dd><code>password</code> - Password for Cassandra's internal authentication using PasswordAuthenticator
                 (if using AllowAllAuthenticator, can be set to any value)</dd>
<dd><code>keyspace</code> - Keyspace name for which the schema migration needs to be applied</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.datastax.driver.core.exceptions.DriverException</code> - if query fails</dd>
</dl>
</li>
</ul>
<a name="clean-com.datastax.driver.core.Session-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>clean</h4>
<pre>void&nbsp;clean(com.datastax.driver.core.Session&nbsp;session,
           java.lang.String&nbsp;keyspace)</pre>
<div class="block">Drops keyspace if it exists</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>session</code> - Session to a cassandra cluster</dd>
<dd><code>keyspace</code> - Keyspace name for which the schema migration needs to be applied</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.datastax.driver.core.exceptions.DriverException</code> - if query fails</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../uk/sky/cqlmigrate/CassandraNoOpLockConfig.CassandraNoOpLockConfigBuilder.html" title="class in uk.sky.cqlmigrate"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../uk/sky/cqlmigrate/CqlMigratorConfig.html" title="class in uk.sky.cqlmigrate"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?uk/sky/cqlmigrate/CqlMigrator.html" target="_top">Frames</a></li>
<li><a href="CqlMigrator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
